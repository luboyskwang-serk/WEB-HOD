# Dedazen Store - เว็บไซต์จำหน่ายสินค้าดิจิทัล

## ภาพรวมระบบ
เว็บไซต์ Dedazen Store เป็นระบบจำหน่ายสินค้าดิจิทัลที่มีฟีเจอร์หลากหลาย ได้แก่:
- ระบบสมาชิก (สมัคร/เข้าสู่ระบบ)
- ระบบเติมเงินผ่านหลายช่องทาง
- ระบบซื้อสินค้าประเภทต่างๆ
- ระบบจัดการร้านค้าสำหรับผู้ดูแล

## โครงสร้างฐานข้อมูลหลัก

### ตารางผู้ใช้
- `users`: จัดเก็บข้อมูลผู้ใช้ รวมถึง username, password, email, point (เครดิต), ระดับผู้ใช้ (user/admin)

### ตารางสินค้า
- `box_product`: สินค้าหลักในร้าน
- `box_stock`: สต๊อกสินค้า
- `category`: หมวดหมู่สินค้า
- `product_imgs`: รูปภาพของสินค้า

### ตารางการเงิน
- `topup_his`: ประวัติการเติมเงิน
- `boxlog`: ประวัติการซื้อสินค้า
- `redeem`: โค้ดส่วนลด/แลกเงิน
- `redeem_his`: ประวัติการใช้โค้ด

### ตารางตั้งค่าระบบ
- `setting`: การตั้งค่าเว็บไซต์ทั่วไป
- `bank`: ข้อมูลบัญชีธนาคาร
- `carousel`: รูปภาพสไลด์โชว์

## ฟีเจอร์หลัก

### 1. ระบบสมาชิก
**หน้าที่เกี่ยวข้อง:**
- `page/login.php`: หน้าเข้าสู่ระบบ
- `page/register.php`: หน้าสมัครสมาชิก
- `system/login.php`: ระบบตรวจสอบการเข้าสู่ระบบ
- `system/register.php`: ระบบสมัครสมาชิก

**ฟีเจอร์:**
- สมัครสมาชิกด้วย username/password
- เข้าสู่ระบบด้วย username/password
- เข้าสู่ระบบด้วยโซเชียล (Discord, Line)
- ระบบ reCAPTCHA ป้องกันบอท
- ระบบตรวจสอบเงื่อนไขการใช้งาน

### 2. ระบบเติมเงิน
**หน้าที่เกี่ยวข้อง:**
- `page/topup.php`: หน้าเติมเงิน
- `system/topup.php`: ระบบเติมเงินด้วยลิงก์ซองอังเปา
- `page/Topup_qr.php`: ระบบเติมเงินด้วย QR Code
- `page/redeem.php`: ระบบแลกโค้ด

**ช่องทางการเติมเงิน:**
- เติมด้วยซองอั่งเปา TrueMoney
- เติมด้วย QR Code
- ยืนยันสลิปผ่านระบบสแกน QR
- แลกโค้ดของขวัญ

### 3. ระบบซื้อสินค้า
**หน้าที่เกี่ยวข้อง:**
- `page/shop.php`: หน้าแสดงสินค้าตามหมวดหมู่
- `page/buy.php`: หน้ารายละเอียดสินค้าและการสั่งซื้อ
- `system/buybox.php`: ระบบประมวลผลการสั่งซื้อ

**ประเภทสินค้า:**
- สินค้าทั่วไป (ไอดีเกม, แอพพรีเมียม, ฯลฯ)
- สินค้าวงล้อเสี่ยงโชค
- สินค้า API จากภายนอก

### 4. ระบบจัดการร้านค้า (Admin)
**หน้าที่เกี่ยวข้อง:**
- `page/backend/menu_manage.php`: เมนูหลักผู้ดูแล
- `page/backend/dashboard.php`: หน้าแดชบอร์ด
- `page/backend/product.php`: จัดการสินค้า
- `page/backend/category.php`: จัดการหมวดหมู่
- `page/backend/user_edit.php`: จัดการผู้ใช้
- ฯลฯ

**ฟีเจอร์:**
- ดูสถิติร้านค้า
- จัดการสินค้าและสต๊อก
- จัดการหมวดหมู่สินค้า
- จัดการผู้ใช้
- จัดการโปรโมชั่น
- ดูประวัติการสั่งซื้อ/เติมเงิน

### 5. ระบบ API ภายนอก
**ตารางที่เกี่ยวข้อง:**
- `stock_api`: สินค้าจาก API ภายนอก
- `apipeam_product`: สินค้าจาก Peamsub24hr
- `history_api`: ประวัติการสั่งซื้อ API

**ฟีเจอร์:**
- ดึงสินค้าจาก API ภายนอก
- จัดการราคาขาย
- แสดงสต๊อกสินค้าแบบเรียลไทม์

## ระบบความปลอดภัย

### การจัดการรหัสผ่าน
- จัดเก็บรหัสผ่านในรูปแบบ MD5 (ควรอัปเกรดเป็น bcrypt)
- มีระบบเปลี่ยนรหัสผ่าน

### การป้องกันบอท
- ใช้ Google reCAPTCHA v2
- ตรวจสอบ session อย่างเข้มงวด

### การตรวจสอบสิทธิ์
- ตรวจสอบ session ก่อนเข้าถึงฟีเจอร์ต่างๆ
- แยกสิทธิ์ระหว่าง user และ admin

## ระบบแจ้งเตือน

### แจ้งเตือนผ่าน LINE Notify
- แจ้งเตือนเมื่อมีการเติมเงิน
- แจ้งเตือนเมื่อมีการสั่งซื้อสินค้า

### แจ้งเตือนผ่าน Discord Webhook
- แจ้งเตือนเมื่อมีการสั่งซื้อสินค้า
- แจ้งเตือนเมื่อมีการเติมเงิน

## ฟีเจอร์พิเศษ

### ระบบสมาชิก VIP
- มีราคาพิเศษสำหรับสมาชิก VIP
- แสดงสีพิเศษในหน้าเว็บ

### ระบบวงล้อเสี่ยงโชค
- มีสินค้าประเภทธงล้อ
- มีระบบสุ่มรางวัลตามเปอร์เซ็นต์ที่กำหนด

### ระบบโปรโมชั่น
- มีหน้าโปรโมชั่นสำหรับข่าวสาร
- มีระบบแนะนำสินค้า/หมวดหมู่

## ข้อควรระวัง/ข้อจำกัด

### ความปลอดภัย
- ระบบจัดเก็บรหัสผ่านด้วย MD5 ซึ่งไม่ปลอดภัยเพียงพอ
- ควรอัปเกรดเป็น bcrypt หรือ Argon2

### โค้ดซ้ำซ้อน
- มีโค้ดที่ซ้ำกันในหลายๆ หน้า
- ควรทำระบบเทมเพลตให้ดีขึ้น

### ระบบเติมเงิน
- ใช้ API ภายนอกในการตรวจสอบซองอังเปา
- ต้องพึ่งพาความเสถียรของ API ภายนอก

## การพัฒนาต่อไป

### ควรปรับปรุง
1. ระบบความปลอดภัยของรหัสผ่าน
2. ระบบจัดการเทมเพลต
3. ระบบตรวจสอบข้อผิดพลาดอย่างละเอียด
4. ระบบสำรองข้อมูลอัตโนมัติ

### ฟีเจอร์ที่ควรเพิ่ม
1. ระบบตระกร้าสินค้า
2. ระบบคูปองส่วนลด
3. ระบบคะแนนสะสม
4. ระบบจัดการคำสั่งซื้อสำหรับลูกค้า
5. ระบบรายงานทางการเงินสำหรับผู้ดูแล